!function(){function e(){filesLoaded++,loadingProgress=filesLoaded/filesToLoad,gameLoaded||filesLoaded>=filesToLoad&&(gameLoaded=!0,container.addEventListener("touchstart",a),container.addEventListener("mousedown",a))}function t(){if("loading"===GAME_STATE&&(c.fillStyle="#FFF",c.fillRect(0,0,screenWidth,screenHeight),c.fillStyle="#347BB9",c.textAlign="center",c.font="italic 42px arial, sans-serif",0==gameLoaded?c.fillText("loading...",halfWidth,halfHeight):c.fillText("Tap to Start",halfWidth,halfHeight)),"logos"===GAME_STATE&&(c.fillStyle="#FFF",c.fillRect(0,0,screenWidth,screenHeight),activeLogoObjects.forEach(function(e,t){e.update(),!1===e.active&&activeLogoObjects.splice(t,1)})),"title"===GAME_STATE&&(c.drawImage(brickBG,0,0),c.font="20px cooper-black-std, serif",c.textAlign="center",wrapString="The goal of the game is to destroy your stress beyond repair. Watch your destruc-o-meter to keep track of the stress you have worked off.",c.fillStyle="#000",c.fillText(soundStatus,71,34),r(c,wrapString,halfWidth+3,328,440,22),c.fillStyle="#FFF",c.fillText(soundStatus,68,30),r(c,wrapString,halfWidth,325,440,22),activeTitleObjects.forEach(function(e,t){e.update()}),activeTitlePopups.forEach(function(e,t){e.update()}),activeFadeObjects.forEach(function(e,t){e.update()})),"select"===GAME_STATE){switch(c.drawImage(brickBG,0,0),c.font="20px cooper-black-std, serif",c.textAlign="center",wrapString="Select the object to represent your stress and then type in what is stressing you out. Click OK to begin.",c.fillStyle="#000",c.fillText("What stresses you out?",halfWidth+3,325),r(c,wrapString,halfWidth+3,108,585,20),c.fillStyle="#FFF",c.fillText("What stresses you out?",halfWidth,322),r(c,wrapString,halfWidth,105,585,20),activeTitleObjects.forEach(function(e,t){e.update()}),chosenObject){case 1:c.drawImage(selectedBG,98,128);break;case 2:c.drawImage(selectedBG,283,128);break;case 3:c.drawImage(selectedBG,469,128)}activeTitlePopups.forEach(function(e,t){e.update()}),activeFadeObjects.forEach(function(e,t){e.update()})}if("transition"===GAME_STATE&&(c.fillStyle=bgGradient,c.fillRect(0,0,screenWidth,screenHeight),activeTitlePopups.forEach(function(e,t){e.update()}),activePaperCrumple[0]&&activePaperCrumple[0].update(),activeStressFade.forEach(function(e,t){e.update()}),activeFadeObjects.forEach(function(e,t){e.update()})),"gameplay"===GAME_STATE){switch(currentBackground){case 1:c.fillStyle=bgGradient,c.fillRect(0,0,screenWidth,screenHeight);break;case 2:c.drawImage(brickBG,0,0);break;case 3:c.drawImage(roadBG,0,0);break;case 4:c.drawImage(hockeyBG,0,0)}if(activeDogObject[0]&&activeDogObject[0].update(),activeGameplayObject[0].update(),activeAnimationFX[0]&&(!0===activeAnimationFX[0].active?activeAnimationFX[0].update():(activeButton=0,allowInput=!0,activeAnimationFX=[])),activeDentObjects.forEach(function(e,t){!0===e.active?e.update():activeDentObjects.splice(t,1)}),activeHitterObject[0]&&activeHitterObject[0].update(),activeChunkObjects.forEach(function(e,t){!0===e.active?e.update():activeChunkObjects.splice(t,1)}),activeTitleObjects.forEach(function(e,t){e.update()}),activeHealthMeter[0]&&activeHealthMeter[0].update(),0<activeButton)switch(activeButton){case 1:c.drawImage(buttonSelected,650,27);break;case 2:c.drawImage(buttonSelected,-4,36);break;case 3:c.drawImage(buttonSelected,-4,103);break;case 4:c.drawImage(buttonSelected,-4,172);break;case 5:c.drawImage(buttonSelected,-4,241);break;case 6:c.drawImage(buttonSelected,-4,311)}if(!0===bgMenuOpen&&activeBGMenu.forEach(function(e,t){e.update()}),!0===transitionComplete)switch(currentBackground){case 1:c.drawImage(bgSelectGrad,650,37);break;case 2:c.drawImage(bgSelectBrick,650,37);break;case 3:c.drawImage(bgSelectRoad,650,37);break;case 4:c.drawImage(bgSelectHockey,650,37)}activeFadeObjects.forEach(function(e,t){e.update()})}"endscreen"===GAME_STATE&&(c.drawImage(brickBG,0,0),c.drawImage(pdfIcon,220,175),c.drawImage(endLinkBG,240,185),c.drawImage(endLinkBG,240,302),c.font="20px cooper-black-std, serif",c.textAlign="center",c.fillStyle="#000",c.fillText("If you're feeling stressed...",halfWidth+3,109),r(c,"If you still find yourself struggling with an issue, consider talking with a professional.",halfWidth+3,270,592,20),c.fillStyle="#FFF",c.fillText("If you're feeling stressed...",halfWidth,106),r(c,"If you still find yourself struggling with an issue, consider talking with a professional.",halfWidth,268,592,20),activeTitleObjects.forEach(function(e,t){e.update()}),activeTitlePopups.forEach(function(e,t){e.update()}),c.font="18px cooper-black-std, serif",c.fillText(tipString,halfWidth,142),c.fillText("Find more tips here!",halfWidth,213),c.fillText("Find one here",halfWidth,330),activeFadeObjects.forEach(function(e,t){e.update()}))}function i(){switch(s(),GAME_STATE){case"loading":activeLogoObjects[activeLogoObjects.length]=new logoPopUp(mymLogo),setTimeout(i,2e3),GAME_STATE="logos";break;case"logos":activeFadeObjects[activeLogoObjects.length]=new screenFade(1,0,"#FFF"),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(stressText,225,-200,225,-3)},450),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(meText,285,screenHeight+100,285,85)},350),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(lessText,256,screenHeight+100,256,135)},550),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(subheadText,screenWidth+100,245,170,245)},750),setTimeout(function(){activeTitlePopups[activeTitlePopups.length]=new titlePopUp(startButton,675,347)},1500),GAME_STATE="title";break;case"title":setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(pickText,screenWidth,6,6,6)},50),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(anText,screenWidth,22,136,22)},200),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(objectText,screenWidth,-5,211,-5)},350),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(chooseBG,98,screenHeight,98,128)},350),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(chooseBG,283,screenHeight,283,128)},550),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(chooseBG,469,screenHeight,469,128)},750),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(nameTextBG,screenWidth,324,235,324)},950),setTimeout(function(){activeTitlePopups[activeTitlePopups.length]=new titlePopUp(chooseBeachball,184,217),!1===soundMuted&&bloopSnd.play()},1200),setTimeout(function(){activeTitlePopups[activeTitlePopups.length]=new titlePopUp(chooseBasketball,374,217),!1===soundMuted&&bloopSnd.play()},1350),setTimeout(function(){activeTitlePopups[activeTitlePopups.length]=new titlePopUp(choosePaper,559,217),!1===soundMuted&&bloopSnd.play()},1500),userText.style.display="block",GAME_STATE="select";break;case"select":switch(s(),activeFadeObjects[activeLogoObjects.length]=new screenFade(1,0,"#FFF"),chosenObject){case 1:objectImage=beachballFull;break;case 2:objectImage=basketballFull;break;case 3:objectImage=paperCrumple01}setTimeout(function(){activeTitlePopups[activeTitlePopups.length]=new titlePopUp(objectImage,halfWidth,halfHeight),!1===soundMuted&&bloopSnd.play()},850),setTimeout(function(){activeStressFade[0]=new stressTextFade(0,1)},1550),setTimeout(function(){activeStressFade[0]=new stressTextFade(1,0)},3800),fireAnimationFrames=[fireFrame_01,fireFrame_02,fireFrame_03,fireFrame_04,fireFrame_05,fireFrame_06,fireFrame_07],3===chosenObject?(crumpleAnimFrames=[paperCrumple01,paperCrumple02,paperCrumple03,paperCrumple04,paperFull],setTimeout(function(){activeTitlePopups=[],activePaperCrumple[0]=new paperCrumpleAnim},4200)):setTimeout(i,5e3),allowInput=!0,GAME_STATE="transition";break;case"transition":s(),activeGameplayObject[0]=new gameplayStressObject,activeTitleObjects[0]=new titleObject(pickToolHdr,7,-60,7,0),activeTitleObjects[1]=new titleObject(pickBGHdr,641,-60,641,0),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(tractorBtn,-70,46,7,46)},700),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(BGBtn,screenWidth,37,658,37)},750),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(hammerBtn,-70,114,7,114)},800),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(golfBtn,-70,182,7,182)},900),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(dogBtn,-70,251,7,251),activeTitleObjects[activeTitleObjects.length]=new titleObject(trashCan,683,screenHeight,683,339),activeTitleObjects[activeTitleObjects.length]=new titleObject(destructBG,686,screenHeight,686,136),activeHealthMeter[0]=new healthMeterObject,activeTitleObjects[activeTitleObjects.length]=new titleObject(destructHdr,621,screenHeight,621,360)},1e3),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(fireBtn,-70,322,7,322)},1100),setTimeout(function(){transitionComplete=!0},1400),GAME_STATE="gameplay";break;case"gameplay":s(),activeFadeObjects[activeLogoObjects.length]=new screenFade(1,0,"#FFF"),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(copingText,screenWidth,1,201,1)},150),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(tipText,screenWidth,2,400,2)},700),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(tipBG,95,screenHeight,95,106)},1100),setTimeout(function(){activeTitlePopups[activeTitlePopups.length]=new titlePopUp(doAgainBtn,680,355)},1500),GAME_STATE="endscreen";break;case"endscreen":s(),chosenObject=0,objectImage=0,stressObjectRadius=0,wrapString="",userText.value="",stressSource="",transitionComplete=!1,currentBackground=1,activeButton=0,bgMenuOpen=!1,allowInput=!0,gameEnd=!1,activeFadeObjects[activeLogoObjects.length]=new screenFade(1,0,"#FFF"),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(stressText,225,-200,225,-3)},450),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(meText,285,screenHeight+100,285,85)},350),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(lessText,256,screenHeight+100,256,135)},550),setTimeout(function(){activeTitleObjects[activeTitleObjects.length]=new titleObject(subheadText,screenWidth+100,245,170,245)},750),setTimeout(function(){activeTitlePopups[activeTitlePopups.length]=new titlePopUp(startButton,675,347)},1500),GAME_STATE="title"}}function a(e){window.scrollTo(0,1),INPUT_TYPE||(e.clientX?(INPUT_TYPE="mouse",container.removeEventListener("touchstart",a),container.addEventListener("mousemove",o),container.addEventListener("mouseup",n)):(INPUT_TYPE="touch",container.removeEventListener("mousedown",a),container.addEventListener("touchend",n))),"mouse"==INPUT_TYPE?(clickX=e.clientX-offsetX,clickY=e.clientY-offsetY):(clickX=e.touches[0].pageX-offsetX,clickY=e.touches[0].pageY-offsetY)}function n(e){window.scrollTo(0,1),e.preventDefault();var t=clickY*(canvas.height/canvas.offsetHeight),a=clickX*(canvas.width/canvas.offsetWidth);switch(GAME_STATE){case"loading":bloopSnd.play(),i();break;case"title":20<a&&a<130&&9<t&&t<40&&("mute audio"===soundStatus?(soundStatus="play audio",soundMuted=!0):(soundStatus="mute audio",soundMuted=!1)),615<a&&a<730&&287<t&&t<405&&(!1===soundMuted&&selectSnd.play(),i());break;case"select":131<t&&t<302&&(96<a&&a<275&&(l(),chosenObject=1,!(stressObjectRadius=162)===soundMuted&&selectSnd.play()),282<a&&a<461&&(l(),chosenObject=2,!(stressObjectRadius=162)===soundMuted&&selectSnd.play()),468<a&&a<647&&(l(),chosenObject=3,!(stressObjectRadius=142)===soundMuted&&selectSnd.play())),0<chosenObject&&!0===allowInput&&305<t&&t<415&&641<a&&a<747&&(stressSource=userText.value,""===stressSource&&(stressSource="This is your stress"),userText.style.display="none",activeFadeObjects[activeLogoObjects.length]=new screenFade(0,1,"#FFF"),(allowInput=!1)===soundMuted&&selectSnd.play(),setTimeout(i,800));break;case"gameplay":a<76&&!0===allowInput&&(43<t&&t<109&&(!1===soundMuted&&tractorSnd.play(),activeButton=2,allowInput=!1,activeAnimationFX[0]=new tractorObject,setTimeout(function(){activeGameplayObject[0].currentAnimation="shake",activeGameplayObject[0].shakeDamage=!0,activeGameplayObject[0].shakeDamageAmount=.008,activeGameplayObject[0].releaseChunks=!0;var e=(new Date).getTime();activeGameplayObject[0].animDuration=e+700},200)),111<t&&t<177&&(activeButton=3),179<t&&t<250&&(activeButton=4),252<t&&t<320&&(activeButton=5,(allowInput=!1)===soundMuted&&growlSnd.play(),activeDogObject[0]=new dogObject(265,112,551,-34),setTimeout(function(){activeDogObject[0]=new dogObject(551,-34,340,80)},1500),setTimeout(function(){!1===soundMuted&&dogSnd.play(),activeDogObject=[],activeGameplayObject[0].currentAnimation="dog",activeGameplayObject[0].releaseChunks=!0;var e=(new Date).getTime();activeGameplayObject[0].nextUpdate=e+82},1800)),322<t&&t<393&&(activeButton=6,allowInput=!1,activeAnimationFX[0]=new fireObject,setTimeout(function(){!1===soundMuted&&fireSnd.play()},750),setTimeout(function(){activeGameplayObject[0].currentAnimation="shake",activeGameplayObject[0].releaseChunks=!0,activeGameplayObject[0].shakeDamage=!0,activeGameplayObject[0].shakeDamageAmount=.004;var e=(new Date).getTime();activeGameplayObject[0].animDuration=e+2500},1200))),!0===bgMenuOpen&&37<t&&t<107&&(377<a&&a<442&&(currentBackground=4,g()),445<a&&a<513&&(currentBackground=3,g()),515<a&&a<585&&(currentBackground=2,g()),586<a&&a<657&&(currentBackground=1,g())),655<a&&!0===allowInput&&37<t&&t<110&&(allowInput=!1,function(){!1===soundMuted&&bloopSnd.play();activeButton=1,bgMenuOpen=!0,activeBGMenu[0]=new bgMenuObject(bgSelectHockey,screenWidth,37,374,37),activeBGMenu[1]=new bgMenuObject(bgSelectRoad,screenWidth,37,443,37),activeBGMenu[2]=new bgMenuObject(bgSelectBrick,screenWidth,37,514,37),activeBGMenu[3]=new bgMenuObject(bgSelectGrad,screenWidth,37,585,37)}()),3===activeButton&&!0===allowInput&&d(a,t)&&(swingSnd.play(),setTimeout(function(){hitSnd.play()},100),activeHitterObject[0]=new hitObject(a,t,"hammer"),h(a,t),activeHealthMeter[0].deduct(.02)),4===activeButton&&!0===allowInput&&d(a,t)&&(swingSnd.play(),setTimeout(function(){hitSnd.play()},175),activeHitterObject[0]=new hitObject(a,t,"golf"),h(a,t),activeHealthMeter[0].deduct(.02));break;case"endscreen":230<a&&a<514&&(180<t&&t<236&&console.log("tips PDF"),294<t&&t<350&&window.open("https://mindyourmind.ca/help")),622<a&&303<t&&t<403&&(!1===soundMuted&&selectSnd.play(),i())}}function o(e){window.scrollTo(0,1),e.preventDefault()}function r(e,t,a,i,c,n){for(var o=t.split(" "),r="",s=0;s<o.length;s++){var l=r+o[s]+" ";c<e.measureText(l).width?(e.fillText(r,a,i),r=o[s]+" ",i+=n):r=l}e.fillText(r,a,i)}function s(){activeLogoObjects=[],activeFadeObjects=[],activeTitleObjects=[],activeTitlePopups=[],activeStressFade=[],activePaperCrumple=[],activeGameplayObject=[],activeBGMenu=[],activeHealthMeter=[],activeAnimationFX=[],activeDentObjects=[],activeChunkObjects=[],activeHitterObject=[],activeDogObject=[]}function l(){0===chosenObject&&(activeTitlePopups[activeTitlePopups.length]=new titlePopUp(okButton,694,361))}function g(){!1===soundMuted&&selectSnd.play(),activeButton=0,bgMenuOpen=!1,allowInput=!0,activeBGMenu=[]}function d(e,t){var a=e-halfWidth,i=t-halfHeight;return Math.ceil(Math.sqrt(a*a+i*i))<stressObjectRadius}function h(a,i){setTimeout(function(){activeDentObjects[activeDentObjects.length]=new dentObject(a,i);var e=Math.floor(3*Math.random())+3;for(ii=0;ii<e;ii++)activeChunkObjects[activeChunkObjects.length]=new chunkObject(a,i);activeGameplayObject[0].currentAnimation="shake";var t=(new Date).getTime();activeGameplayObject[0].animDuration=t+200},75)}function u(){if(!0===gameEnd){allowInput=!1,gameEnd=!1;var e=Math.floor(Math.random()*randomTips.length);tipString=randomTips[e],activeFadeObjects[activeLogoObjects.length]=new screenFade(0,1,"#FFF"),setTimeout(i,750)}}canvas=document.getElementById("canvas"),c=canvas.getContext("2d"),canvas.width=752,canvas.height=420,screenWidth=canvas.width,screenHeight=canvas.height,halfWidth=screenWidth/2,halfHeight=screenHeight/2,offsetX=container.offsetLeft,offsetY=container.offsetTop,INPUT_TYPE=null,filesToLoad=58,filesLoaded=0,GAME_STATE="loading",gameLoaded=!1,gameLoop=setInterval(t,33),easeValue=.25,tweenSpring=.1,tweenFriction=.8,targetSpring=.4,targetFriction=.8,soundMuted=!1,chosenObject=0,objectImage=0,stressObjectRadius=0,wrapString="",soundStatus="mute audio",userText=document.getElementById("stressText"),userText.value="",stressSource="",transitionComplete=!1,currentBackground=1,activeButton=0,bgMenuOpen=!1,allowInput=!0,gameEnd=!1,bgGradient=c.createLinearGradient(0,0,screenWidth,screenHeight),bgGradient.addColorStop(0,"#4892FF"),bgGradient.addColorStop(1,"#000D37"),fireAnimationFrames=[],crumpleAnimFrames=[],activeLogoObjects=[],activeFadeObjects=[],activeTitleObjects=[],activeTitlePopups=[],activeStressFade=[],activePaperCrumple=[],activeGameplayObject=[],activeBGMenu=[],activeHealthMeter=[],activeAnimationFX=[],activeDentObjects=[],activeChunkObjects=[],activeHitterObject=[],activeDogObject=[],dogFrames=[20,45,20,40,15,35,20,45,340,320,345,320,340,305,20,45,20,40,15,35,20,55],tipString="",randomTips=["Take a ten minute break every hour when studying","List five positive things in your life","Go for a jog or walk outside ","Take ten deep breathes","Watch your favourite movie","Chill with your friends","Do something nice for someone else","Avoid drugs and alcohol ","Laugh and smile","Take a power nap"],mymLogo=new Image,brickBG=new Image,roadBG=new Image,hockeyBG=new Image,stressText=new Image,meText=new Image,lessText=new Image,subheadText=new Image,startButton=new Image,pickText=new Image,anText=new Image,objectText=new Image,chooseBG=new Image,selectedBG=new Image,chooseBeachball=new Image,chooseBasketball=new Image,choosePaper=new Image,nameTextBG=new Image,okButton=new Image,basketballFull=new Image,beachballFull=new Image,paperFull=new Image,paperCrumple01=new Image,paperCrumple02=new Image,paperCrumple03=new Image,paperCrumple04=new Image,pickToolHdr=new Image,pickBGHdr=new Image,destructHdr=new Image,tractorBtn=new Image,hammerBtn=new Image,golfBtn=new Image,dogBtn=new Image,fireBtn=new Image,BGBtn=new Image,trashCan=new Image,destructBG=new Image,bgSelectGrad=new Image,bgSelectBrick=new Image,bgSelectRoad=new Image,bgSelectHockey=new Image,buttonSelected=new Image,hammer=new Image,golfClub=new Image,healthMeter=new Image,dent=new Image,redChunk=new Image,whiteChunk=new Image,burnMark=new Image,tireTracks=new Image,fireFrame_01=new Image,fireFrame_02=new Image,fireFrame_03=new Image,fireFrame_04=new Image,fireFrame_05=new Image,fireFrame_06=new Image,fireFrame_07=new Image,doggie_01=new Image,doggie_02=new Image,copingText=new Image,tipText=new Image,tipBG=new Image,pdfIcon=new Image,endLinkBG=new Image,doAgainBtn=new Image,mymLogo.onload=e(),brickBG.onload=e(),roadBG.onload=e(),hockeyBG.onload=e(),stressText.onload=e(),meText.onload=e(),lessText.onload=e(),subheadText.onload=e(),startButton.onload=e(),pickText.onload=e(),anText.onload=e(),objectText.onload=e(),chooseBG.onload=e(),selectedBG.onload=e(),chooseBeachball.onload=e(),chooseBasketball.onload=e(),choosePaper.onload=e(),nameTextBG.onload=e(),okButton.onload=e(),basketballFull.onload=e(),beachballFull.onload=e(),paperFull.onload=e(),paperCrumple01.onload=e(),paperCrumple02.onload=e(),paperCrumple03.onload=e(),paperCrumple04.onload=e(),pickToolHdr.onload=e(),pickBGHdr.onload=e(),destructHdr.onload=e(),tractorBtn.onload=e(),hammerBtn.onload=e(),golfBtn.onload=e(),dogBtn.onload=e(),fireBtn.onload=e(),BGBtn.onload=e(),trashCan.onload=e(),destructBG.onload=e(),bgSelectGrad.onload=e(),bgSelectBrick.onload=e(),bgSelectRoad.onload=e(),bgSelectHockey.onload=e(),buttonSelected.onload=e(),hammer.onload=e(),golfClub.onload=e(),healthMeter.onload=e(),dent.onload=e(),redChunk.onload=e(),whiteChunk.onload=e(),burnMark.onload=e(),tireTracks.onload=e(),fireFrame_01.onload=e(),fireFrame_02.onload=e(),fireFrame_03.onload=e(),fireFrame_04.onload=e(),fireFrame_05.onload=e(),fireFrame_06.onload=e(),fireFrame_07.onload=e(),doggie_01.onload=e(),doggie_02.onload=e(),copingText.onload=e(),tipText.onload=e(),tipBG.onload=e(),pdfIcon.onload=e(),endLinkBG.onload=e(),doAgainBtn.onload=e(),mymLogo.src="images/mym_logo.png",brickBG.src="images/brick_bg.jpg",roadBG.src="images/road_bg.jpg",hockeyBG.src="images/hockey_bg.jpg",stressText.src="images/stress_text.png",meText.src="images/me_text.png",lessText.src="images/less_text.png",subheadText.src="images/title_subheading.png",startButton.src="images/start_button.png",pickText.src="images/pick_text.png",anText.src="images/an_text.png",objectText.src="images/object_text.png",chooseBG.src="images/choose_button_bg.png",selectedBG.src="images/selected_button_bg.png",chooseBeachball.src="images/choose_beachball.png",chooseBasketball.src="images/choose_basketball.png",choosePaper.src="images/choose_paper.png",nameTextBG.src="images/name_text_bg.png",okButton.src="images/ok_button.png",basketballFull.src="images/basketball_full.png",beachballFull.src="images/beachball_full.png",paperFull.src="images/paper_full.png",paperCrumple01.src="images/paper_crumple_01.png",paperCrumple02.src="images/paper_crumple_02.png",paperCrumple03.src="images/paper_crumple_03.png",paperCrumple04.src="images/paper_crumple_04.png",pickToolHdr.src="images/pick_tool_hdr.png",pickBGHdr.src="images/pick_backdrop_hdr.png",destructHdr.src="images/destruct_hdr.png",tractorBtn.src="images/tractor_btn.png",hammerBtn.src="images/hammer_btn.png",golfBtn.src="images/golf_btn.png",dogBtn.src="images/dog_btn.png",fireBtn.src="images/fire_btn.png",BGBtn.src="images/backdrop_btn.png",trashCan.src="images/trash_can.png",destructBG.src="images/destructo_bg.png",bgSelectGrad.src="images/bg_select_grad.png",bgSelectBrick.src="images/bg_select_brick.png",bgSelectRoad.src="images/bg_select_road.png",bgSelectHockey.src="images/bg_select_hcky.png",buttonSelected.src="images/button_selected.png",hammer.src="images/hammer.png",golfClub.src="images/golf_club.png",healthMeter.src="images/health_meter.png",dent.src="images/dent.png",redChunk.src="images/red_chunk.png",whiteChunk.src="images/white_chunk.png",burnMark.src="images/burn_mark.png",tireTracks.src="images/tire_treads.png",fireFrame_01.src="images/fire_frame_01.png",fireFrame_02.src="images/fire_frame_02.png",fireFrame_03.src="images/fire_frame_03.png",fireFrame_04.src="images/fire_frame_04.png",fireFrame_05.src="images/fire_frame_05.png",fireFrame_06.src="images/fire_frame_06.png",fireFrame_07.src="images/fire_frame_07.png",doggie_01.src="images/doggie_01.png",doggie_02.src="images/doggie_02.png",copingText.src="images/coping_text.png",tipText.src="images/tip_text.png",tipBG.src="images/tip_bg.png",pdfIcon.src="images/pdf_icon.png",endLinkBG.src="images/end_links_bg.png",doAgainBtn.src="images/do_again_btn.png",bloopSnd=new Howl({src:["sounds/bloop_sound.mp3"],volume:.6}),selectSnd=new Howl({src:["sounds/select_sound.mp3"],volume:.6}),swingSnd=new Howl({src:["sounds/swing_sound.mp3"],volume:.6}),hitSnd=new Howl({src:["sounds/hit_sound.mp3"],volume:.7}),tractorSnd=new Howl({src:["sounds/tractor_sound.mp3"],volume:.6}),fireSnd=new Howl({src:["sounds/fire_sound.mp3"],volume:.7}),growlSnd=new Howl({src:["sounds/growl_sound.mp3"],volume:.75}),dogSnd=new Howl({src:["sounds/dog_sound.mp3"],volume:.7}),healthMeterObject=function(){var t=this;t.x=695,t.y=144,t.height=healthMeter.height,t.width=healthMeter.width,t.yOffset=0,t.yDrawHeight=0,t.health=1,t.deduct=function(e){t.health-=e,t.health<=0&&(gameEnd=!0)},t.update=function(){t.yOffset=t.height-Math.floor(t.height*t.health),t.yDrawHeight=Math.floor(t.height*t.health),c.drawImage(healthMeter,0,t.yOffset,t.width,t.height,t.x,t.y+t.yOffset,t.width,t.height)}},dogObject=function(e,t,a,i){var n=this;n.active=!0,n.x=e,n.y=t,n.targX=a,n.targY=i,n.angle=55,n.update=function(){if(!0===n.active){var e=n.targX-n.x,t=n.targY-n.y,a=Math.ceil(e*easeValue),i=Math.ceil(t*easeValue);n.x+=a,n.y+=i,e<0&&(e*=-1),t<0&&(t*=-1),e<4&&t<4&&(n.x=n.targX,n.y=n.targY,n.active=!1)}c.save(),c.translate(n.x,n.y),c.rotate(n.angle*Math.PI/180),c.drawImage(doggie_01,0,0),c.restore()}},hitObject=function(e,t,a){var i=this;i.x=e,i.y=t,i.type=a,"hammer"===i.type?(i.image=hammer,i.offsetX=-200,i.offsetY=-80,i.angle=0):(i.image=golfClub,i.offsetX=-200,i.offsetY=-60,i.angle=-40),i.active=!0,i.centerX=i.image.width/2,i.centerY=i.image.height/2,i.alpha=1;var n=(new Date).getTime();i.nextUpdate=n+90,i.fadeStart=n+300,i.life=n+750,i.update=function(){var e=(new Date).getTime();e>=i.life?i.active=!1:(e>=i.nextUpdate&&("hammer"===i.type?(i.angle=60,i.offsetX=-160,i.offsetY=-10):(i.angle=55,i.offsetX=-140,i.offsetY=20)),e>=i.fadeStart&&(i.alpha-=.25,i.alpha<0&&(i.alpha=0,i.active=!1)),c.save(),c.translate(i.x+i.centerX,i.y+i.centerY),c.rotate(i.angle*Math.PI/180),c.globalAlpha=i.alpha,c.drawImage(i.image,i.offsetX,i.offsetY),c.restore())}},chunkObject=function(e,t){var a=this;a.x=e,a.y=t,a.active=!0,a.xSpeed=Math.floor(40*Math.random())-20,a.ySpeed=-1*(Math.floor(13*Math.random())+8),2===chosenObject?a.image=redChunk:a.image=whiteChunk,a.update=function(){!0===a.active&&(a.x+=a.xSpeed,a.y+=a.ySpeed,a.y>screenHeight?a.active=!1:a.ySpeed+=3,c.drawImage(a.image,a.x,a.y))}},dentObject=function(e,t){var a=this;a.x=e-16,a.y=t-35,a.active=!0,a.alpha=1,a.update=function(){!0===a.active&&(a.alpha-=.08,a.alpha<0&&(a.alpha=0),c.save(),c.globalAlpha=a.alpha,c.drawImage(dent,a.x,a.y),c.restore())}},tractorObject=function(){var t=this;t.active=!0,t.drawOn=0,t.x=halfWidth,t.y=halfHeight,t.height=tireTracks.height,t.width=tireTracks.width,t.centerX=t.width/2,t.centerY=t.height/2,t.angle=Math.floor(90*Math.random())-45+180,t.fadeOut=!1,t.alpha=1,t.fadeTimer=0,t.update=function(){if(!0===t.active){if(t.drawOn+=15,t.drawOn>=t.height&&(t.drawOn=t.height,!1===t.fadeOut&&(t.fadeOut=!0,t.fadeTimer=(new Date).getTime()+450)),!0===t.fadeOut){var e=(new Date).getTime();e>=t.fadeTimer&&(t.alpha-=.04,t.alpha<=0&&(t.alpha=0,t.active=!1))}c.save(),c.translate(t.x,t.y),c.rotate(t.angle*Math.PI/180),c.globalCompositeOperation="overlay",c.globalAlpha=t.alpha,c.drawImage(tireTracks,0,t.height-t.drawOn,t.width,t.drawOn,-t.centerX,-t.centerY,t.width,t.drawOn),c.restore()}}},fireObject=function(){var t=this;t.active=!0,t.frame=0;var e=(new Date).getTime();t.nextFrame=e+42,t.life=e+4500,t.fadeStart=e+3300,t.fading=!0,t.alpha=0,t.targetAlpha=1,t.alphaStep=.03,t.update=function(){var e=(new Date).getTime();e>=t.life?t.active=!1:(e>=t.nextFrame&&(t.frame++,6<t.frame&&(t.frame=0),t.nextFrame=e+42),!1===t.fading&&e>=t.fadeStart&&(t.fading=!0,t.targetAlpha=0,t.alphaStep=-.03),!0===t.fading&&(t.alpha+=t.alphaStep,1<t.alpha&&(t.alpha=1,t.fading=!1),t.alpha<0&&(t.alpha=0)),c.save(),c.globalAlpha=t.alpha,c.drawImage(fireAnimationFrames[t.frame],0,0),c.restore())}},bgMenuObject=function(e,t,a,i,n){var o=this;o.active=!0,o.image=e,o.x=t,o.y=a,o.targX=i,o.targY=n,o.update=function(){if(!0===o.active){var e=o.targX-o.x,t=o.targY-o.y,a=Math.ceil(e*easeValue),i=Math.ceil(t*easeValue);o.x+=a,o.y+=i,e<0&&(e*=-1),t<0&&(t*=-1),e<4&&t<4&&(o.x=o.targX,o.y=o.targY,o.active=!1)}c.drawImage(BGBtn,o.x,o.y),c.drawImage(o.image,o.x-8,o.y)}},gameplayStressObject=function(){var i=this;switch(chosenObject){case 1:i.image=beachballFull;break;case 2:i.image=basketballFull;break;case 3:i.image=paperFull}i.width=i.image.width,i.height=i.image.height,i.xPos=halfWidth-i.width/2,i.yPos=halfHeight-i.height/2,i.currentAnimation="static",i.animDuration=0,i.nextUpdate=0,i.offsetX=0,i.offsetY=0,i.currentFrame=0,i.releaseChunks=!1,i.shakeDamage=!1,i.shakeDamageAmount=0,i.nextChunk=0,i.angle=0,i.update=function(){if("shake"===i.currentAnimation){i.offsetX=Math.floor(20*Math.random())-10,i.offsetY=Math.floor(20*Math.random())-10,!0===i.shakeDamage&&activeHealthMeter[0].deduct(i.shakeDamageAmount);var e=(new Date).getTime();if(e>=i.animDuration&&(i.offsetX=0,i.offsetY=0,i.currentAnimation="static",i.releaseChunks=!1,i.shakeDamage=!1,u()),!0===i.releaseChunks&&e>=i.nextChunk){var t=Math.floor(160*Math.random())-80,a=Math.floor(120*Math.random())-80;activeChunkObjects[activeChunkObjects.length]=new chunkObject(halfWidth+t,halfHeight+a),i.nextChunk=e+Math.floor(250*Math.random())+200}}if(5===activeButton&&"dog"===i.currentAnimation){var e=(new Date).getTime();if(e>=i.nextUpdate&&(i.currentFrame++,i.currentFrame>dogFrames.length?(i.currentFrame=0,i.currentAnimation="none",activeButton=0,allowInput=!0,i.angle=0,activeDogObject[0]=new dogObject(551,-34,340,80),setTimeout(function(){activeDogObject=[],u()},500)):(i.angle=dogFrames[i.currentFrame],i.nextUpdate=e+82,activeHealthMeter[0].deduct(.01))),!0===i.releaseChunks&&e>=i.nextChunk){var t=Math.floor(160*Math.random())-80,a=Math.floor(120*Math.random())-80;activeChunkObjects[activeChunkObjects.length]=new chunkObject(halfWidth+t,halfHeight+a),i.nextChunk=e+Math.floor(250*Math.random())+200}c.save(),c.translate(halfWidth,halfHeight),c.rotate(i.angle*Math.PI/180),c.drawImage(i.image,-188,-188),c.drawImage(doggie_02,-112,-270),c.restore()}else c.drawImage(i.image,i.xPos+i.offsetX,i.yPos+i.offsetY);6===activeButton&&"shake"===i.currentAnimation&&c.drawImage(burnMark,i.xPos+60+i.offsetX,i.yPos+180+i.offsetY)}},paperCrumpleAnim=function(){var t=this;t.currentFrame=0,t.width=crumpleAnimFrames[0].width,t.height=crumpleAnimFrames[0].height;var e=(new Date).getTime();t.nextUpdate=e+150,t.update=function(){var e=(new Date).getTime();e>=t.nextUpdate&&(t.currentFrame<4?(t.currentFrame++,t.nextUpdate=e+150,t.width=crumpleAnimFrames[t.currentFrame].width,t.height=crumpleAnimFrames[t.currentFrame].height):i()),c.drawImage(crumpleAnimFrames[t.currentFrame],halfWidth-t.width/2,halfHeight-t.height/2)}},screenFade=function(e,t,a){var i=this;i.alpha=e,i.targetAlpha=t,i.color=a,i.active=!0,i.update=function(){1==i.active&&(i.alpha>i.targetAlpha?(i.alpha-=.05,i.alpha<=i.targetAlpha&&(i.alpha=i.targetAlpha,i.active=!1)):(i.alpha+=.05,i.alpha>=i.targetAlpha&&(i.alpha=i.targetAlpha)),c.fillStyle=i.color,c.save(),c.globalAlpha=i.alpha,c.fillRect(0,0,screenWidth,screenHeight),c.restore())}},stressTextFade=function(e,t){var a=this;a.alpha=e,a.targetAlpha=t,a.active=!0,a.update=function(){1==a.active&&(a.alpha>a.targetAlpha?(a.alpha-=.05,a.alpha<=a.targetAlpha&&(a.alpha=a.targetAlpha,a.active=!1)):(a.alpha+=.05,a.alpha>=a.targetAlpha&&(a.alpha=a.targetAlpha)),c.font="32px cooper-black-std, serif",c.textAlign="center",c.save(),c.globalAlpha=a.alpha,c.fillStyle="#000",c.fillText(stressSource,halfWidth+3,halfHeight+3),c.fillStyle="#FFF",c.fillText(stressSource,halfWidth,halfHeight),c.restore())}},logoPopUp=function(e){var i=this;i.image=e,i.scale=.05,i.scaleTarget=1,i.width=i.image.width,i.height=i.image.height,i.x=halfWidth,i.y=halfHeight,i.timer,i.delay=1200,i.active=!0,i.update=function(){if(1===i.scaleTarget&&i.scale<1)i.scale+=.15,1<=i.scale&&(i.scale=1,i.timer=(new Date).getTime());else if(0===i.scaleTarget&&0<i.scale)i.scale-=.15,i.scale<=0&&(i.scale=0,i.active=!1);else{var e=(new Date).getTime();e>=i.timer+i.delay&&(i.scaleTarget=0)}c.save();var t=Math.floor(-i.width*i.scale/2),a=Math.floor(-i.height*i.scale/2);c.translate(i.x+t,i.y+a),c.scale(i.scale,i.scale),c.drawImage(i.image,0,0),c.restore()}},titleObject=function(e,t,a,i,n){var o=this;o.active=!0,o.image=e,o.x=t,o.y=a,o.targX=i,o.targY=n,o.update=function(){if(!0===o.active){var e=o.targX-o.x,t=o.targY-o.y,a=Math.ceil(e*easeValue),i=Math.ceil(t*easeValue);o.x+=a,o.y+=i,e<0&&(e*=-1),t<0&&(t*=-1),e<4&&t<4&&(o.x=o.targX,o.y=o.targY,o.active=!1)}c.drawImage(o.image,o.x,o.y)}},titlePopUp=function(e,t,a){var o=this;o.image=e,o.x=t,o.y=a,o.scale=.2,o.scaleTarget=1,o.scaleVel=0,o.width=o.image.width,o.height=o.image.height,o.timer=(new Date).getTime(),o.life=1200,o.active=!0,o.update=function(){var e=(new Date).getTime();if(e>=o.timer+o.life)o.active=!1;else{var t=o.scaleTarget-o.scale,a=t*targetSpring;o.scaleVel+=a,o.scaleVel*=targetFriction,o.scale+=o.scaleVel}if(1==o.active){c.save();var i=Math.floor(-o.width*o.scale/2),n=Math.floor(-o.height*o.scale/2);c.translate(o.x+i,o.y+n),c.scale(o.scale,o.scale),c.drawImage(o.image,0,0),c.restore()}else c.drawImage(o.image,o.x-o.width/2,o.y-o.height/2)}},window.onresize=function(){offsetX=container.offsetLeft,offsetY=container.offsetTop}}();